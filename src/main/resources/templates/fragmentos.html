<!-- head -->
<div th:fragment="headFragmento">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/estilo.css}">
</div>

<!-- boostrapScript -->
<div th:fragment="boostrap-script">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
</div>

<!-- Encabezado de pagina -->
<div th:fragment="encabezado" class="container-fluid">
    <!-- Header -->
    <nav class="navbar navbar-expand-md bg-warning p-3 fixed-top shadow-lg" id="header"
         style="background-color: #ffcc00 !important;">
        <div class="container-fluid">
            <a th:href="@{/}" class="navbar-brand fs-2 fw-bold" href="index.html"><img src="/img/MMtienda.png"
                                                                                       alt="Logo de Market Millenium"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse flex-row-reverse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item"><a th:href="@{/index}"
                                            class="nav-link active fs-4 text-primary text-hover fw-bold"><i
                            class="bi bi-house-door-fill"></i> Inicio</a></li>
                    <li class="nav-item"><a th:href="@{/}" class="nav-link fs-4 text-primary text-hover fw-bold"><i
                            class="bi bi-bag-fill"></i>
                        Tienda</a></li>
                    <li class="nav-item"><a th:href="@{/contacto}"
                                            class="nav-link fs-4 text-primary text-hover fw-bold"><i
                            class="bi bi-people-fill"></i> Contáctanos</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle fs-4 text-primary text-hover fw-bold" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-hand-index-fill"></i>
                            Conocenos</a>
                        <ul class="dropdown-menu" style="background-color: #ffcc00 !important;">
                            <li><a th:href="@{/nosotros}" class="nav-link fs-5 text-primary text-hover fw-semibold">Nosotros</a>
                            </li>
                            <li><a th:href="@{/nosotros}" class="nav-link fs-5 text-primary text-hover fw-semibold">Ubicanos</a>
                            </li>
                            <li><a th:href="@{/videoProductos}"
                                   class="nav-link fs-5 text-primary text-hover fw-semibold">Presentación</a></li>
                            <li><a th:href="@{/sugerencias}" class="nav-link fs-5 text-primary text-hover fw-semibold">Sugerencias</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle fs-4 text-primary text-hover fw-bold" role="button"
                           data-bs-toggle="dropdown" aria-expanded="true"><i class="bi bi-person-circle"></i>
                            Usuario</a>
                        <ul class="dropdown-menu" style="background-color: #ffcc00 !important;">
                            <li>
                                <a class="dropdown-item fs-5 text-primary fw-semibold" href="/login">
                                    Iniciar Sesión
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item fs-5 text-primary fw-semibold" href="/Registrarse">
                                    Registrarse
                                </a>
                            </li>
                        </ul>

                    </li>
                </ul>
            </div>
        </div>
    </nav><!-- Fin del Header -->
</div>

<!-- Footer de pagina -->
<footer th:fragment="pie-pagina" class="footer bg-warning text-center py-4"
        style="background-color: #ffcc00 !important;">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>Market Millenium</h5>
                <p>La tienda de confianza para tus necesidades diarias.</p>
            </div>
            <div class="col-md-4">
                <h5>Enlaces Rápidos</h5>
                <ul class="list-unstyled">
                    <li><a hth:ref="@{/}" class="text-primary">Inicio</a></li>
                    <li><a th:ref="@{/}" class="text-primary">Tienda</a></li>
                    <li><a th:ref="@{/nosotros}" class="text-primary">Nosotros</a></li>
                    <li><a th:ref="@{/}" class="text-primary">Política de Privacidad</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Contacto</h5>
                <p><i class="bi bi-telephone-fill"></i> Teléfono: +51 123 456 789</p>
                <p><i class="bi bi-envelope-fill"></i> Email: contacto@marketmillenium.com</p>
            </div>
        </div>
        <hr class="bg-white">
        <p>&copy; 2025 Market Millenium</p>
        <img src="/img/payments.png" alt="Métodos de pago">
    </div>
</footer>

<!--Configuracion del login y registrer (incluye sus forms y script)-->
  <div th:fragment="staticBackdrop" class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
     data-bs-keyboard="false" tabindex="-1"
     aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">ACCEDER</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body position-relative">
                <!--LOGIN FORM-->
                <form id="loginForm" class="form-section visible">
                    <p>Introduce tu correo:</p>
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control" id="loginEmail" placeholder="Correo electrónico">
                        <label for="floatingInput">Email address</label>
                    </div>
                    <p>Introduce tu contraseña:</p>
                    <div class="form-floating">
                        <input type="password" class="form-control" id="loginPassword" placeholder="Password">
                        <label for="loginPassword">Contraseña</label>
                    </div>
                    <a type="button" class="btn btn-link w-100 mt-2" onclick="toggleForms()">¿No tienes cuenta?, Registrar</a>
                    <div class="modal-footer">
                        <div class="error" id="error-message"></div>
                        <button type="submit" class="btn btn-primary button-form"><span>Iniciar Sesion</span></button>
                        <button type="button" class="btn btn-primary button-form" onclick="toggleForms()"> <span>Registrarse</span>
                        </button>
                    </div>
                </form>
                <!--Rigistrer-->
                <form id="registerForm" class="form-section hidden">
                    <p>Complete sus datos:</p>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="registerName" placeholder="Nombre">
                        <label for="registerName">Nombre</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="registerLastName" placeholder="Apellidos">
                        <label for="registerLastName">Apellidos</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control" id="registerEmail" placeholder="Correo electrónico">
                        <label for="registerEmail">Correo electrónico</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="password" class="form-control" id="registerPassword" placeholder="Contraseña">
                        <label for="registerPassword">Contraseña</label>
                    </div>

                    <!-- Términos y condiciones -->
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" value="" id="termsCheckbox">
                        <label class="form-check-label" for="termsCheckbox">
                            Acepto los <a href="#">términos y condiciones</a>.
                        </label>
                    </div>

                    <div class="error" id="registerError"></div>

                    <div class="modal-footer border-0">
                        <button type="submit" class="btn btn-primary w-100 button-form" id="registerButton" disabled>
                            <Span>Registrarse</Span></button>
                        <button type="button" class="btn btn-link w-100 mt-2" onclick="toggleForms()">¿Ya tienes cuenta?
                            Inicia Sesión
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script defer>
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginError = document.getElementById('loginError');
        const registerError = document.getElementById('registerError');

        const registerName = document.getElementById('registerName');
        const registerLastName = document.getElementById('registerLastName');
        const registerEmail = document.getElementById('registerEmail');
        const registerPassword = document.getElementById('registerPassword');
        const termsCheckbox = document.getElementById('termsCheckbox');
        const registerButton = document.getElementById('registerButton');

        function toggleForms() {
      loginForm.classList.toggle('hidden');
      loginForm.classList.toggle('visible');
      registerForm.classList.toggle('hidden');
      registerForm.classList.toggle('visible');
      loginError.textContent = '';
      registerError.textContent = '';
      loginForm.reset();
      registerForm.reset();
      termsCheckbox.checked = false;
      registerButton.disabled = true;
    }

        function validateEmail(email) {
          return email.includes('@') && email.endsWith('.com');
        }

        loginForm.addEventListener('submit', function (e) {
          e.preventDefault();
          const email = document.getElementById('loginEmail').value.trim();
          const pass = document.getElementById('loginPassword').value.trim();

          if (!validateEmail(email)) {
            loginError.textContent = "El correo debe contener '@' y terminar en '.com'";
            return;
          }
          if (pass.length === 0) {
            loginError.textContent = "La contraseña es obligatoria.";
            return;
          }

          loginError.textContent = '';
          alert("Inicio de sesión exitoso");
          loginForm.reset();
        });

        termsCheckbox.addEventListener('change', () => {
          registerButton.disabled = !termsCheckbox.checked;
        });

        registerForm.addEventListener('submit', function (e) {
          e.preventDefault();

          const name = registerName.value.trim();
          const lastName = registerLastName.value.trim();
          const email = registerEmail.value.trim();
          const pass = registerPassword.value.trim();

          if (name === "" || lastName === "") {
            registerError.textContent = "Nombre y apellidos son obligatorios.";
            return;
          }
          if (!validateEmail(email)) {
            registerError.textContent = "El correo debe contener '@' y terminar en '.com'";
            return;
          }
          if (pass === "") {
            registerError.textContent = "La contraseña es obligatoria.";
            return;
          }
          if (!termsCheckbox.checked) {
            registerError.textContent = "Debes aceptar los términos y condiciones.";
            return;
          }

          registerError.textContent = '';
          alert(`Registro exitoso de: ${name} ${lastName}`);
          registerForm.reset();
          toggleForms(); // Cambiar a login con animación
        });

    </script>
</div>

